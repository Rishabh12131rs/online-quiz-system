<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>QuizHub | Play & Create Quizzes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600&family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css" />

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
</head>
<body>

    <header>
        <div class="logo-nav">
            <img src="https://i.imgur.com/4M34hi2.png" class="quizhub-logo">
            <span class="site-title">QuizHub</span>
        </div>
        <div class="pin-auth">
            <span class="pin-label">Join Game? ID:</span>
            <input type="text" class="pin-input" id="quiz-id-input" placeholder="Quiz/Study ID" maxlength="20">
            <button class="join-btn" id="join-quiz-btn">Join</button>
            
            <button id="dark-mode-toggle">üåô</button>

            <button class="my-results-btn" id="my-results-btn" style="display: none;">My Results</button>

            <div id="user-display" style="display: none;">
                <span id="welcome-user"></span>
                <button class="sign-btn" id="logout-btn">Logout</button>
            </div>
        </div>
    </header>

    <main id="main-content" style="display: none;">

        <section class="hero-section">
            <h1 class="hero-heading">Welcome to QuizHub</h1>
            <p class="hero-subheading">Create, play, and share quizzes in seconds.</p>
            <div class="features-row">
                <div class="card-home card-create">
                    <h2>Create a quiz</h2>
                    <p>Build a quiz with multiple choice or fill-in-the-blank questions.</p>
                    <button class="card-btn" id="create-quiz-btn">Quiz editor</button>
                </div>
                <div class="card-home card-study">
                    <h2>Create a Study Guide</h2>
                    <p>Make flashcard sets for users to learn from.</p>
                    <button class="card-btn" id="create-study-guide-btn">Study Guide editor</button>
                </div>
                <div class="card-home card-ai">
                    <h2>Play a quiz</h2>
                    <p>Test your knowledge with trivia from any category.</p>
                    <button class="card-btn" id="play-quiz-btn">Play Trivia</button>
                </div>
            </div>
        </section>

        <div class="search-container">
            <input type="search" id="search-bar" placeholder="Search for quizzes and study guides by title...">
        </div>
        
        <h3 class="section-title">Shared Quizzes & Study Guides</h3>
        <div class="quiz-list">
            </div>

        <nav class="subject-nav">
            <a href="#" data-category="home"><span class="nav-icon">üè†</span><div>Start</div></a>
            <a href="#" data-category="25"><span class="nav-icon">üé®</span><div>Art</div></a>
            <a href="#" data-category="11"><span class="nav-icon">‚≠ê</span><div>Entertainment</div></a>
            <a href="#" data-category="22"><span class="nav-icon">üåç</span><div>Geography</div></a>
            <a href="#" data-category="23"><span class="nav-icon">üèõÔ∏è</span><div>History</div></a>
            <a href="#" data-category="9"><span class="nav-icon">üí¨</span><div>Languages</div></a> 
            <a href="#" data-category="17"><span class="nav-icon">üß¨</span><div>Science</div></a>
            <a href="#" data-category="21"><span class="nav-icon">üèÄ</span><div>Sports</div></a>
            <a href="#" data-category="9"><span class="nav-icon">‚ùì</span><div>Trivia</div></a> 
        </nav>
    </main>

    <div id="auth-container" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="auth-tabs">
                <button id="login-tab" class="active">Login</button>
                <button id="signup-tab">Sign Up</button>
            </div>
            <form id="login-form">
                <input type="email" id="login-email" placeholder="Email" required>
                <input type="password" id="login-password" placeholder="Password" required>
                <button type="submit">Login</button>
                <p id="login-error" class="error-msg"></p>
                <a href="#" id="forgot-password-link" class="form-link">Forgot Password?</a>
            </form>
            <form id="signup-form" style="display: none;">
                <input type="text" id="signup-username" placeholder="Username" required>
                <input type="email" id="signup-email" placeholder="Email" required>
                <input type="password" id="signup-password" placeholder="Password" required>
                <button type="submit">Sign Up</button>
                <p id="signup-error" class="error-msg"></p>
            </form>

            <div class="auth-divider">or</div>
            <button id="google-signin-btn" class="google-btn">
                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google">
                Sign in with Google
            </button>
        </div>
    </div>

    <div id="forgot-password-container" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>Reset Password</h2>
            <p class="modal-text">Enter your email and we'll send you a link to reset your password.</p>
            <form id="forgot-password-form">
                <input type="email" id="forgot-email" placeholder="Email" required>
                <button type="submit">Send Reset Email</button>
                <p id="forgot-error" class="error-msg"></p>
                <a href="#" id="back-to-login-link" class="form-link">Back to Login</a>
            </form>
        </div>
    </div>

    <div id="quiz-app-container" style="display: none;">
        <button id="close-quiz-btn" class="close-btn">X Back to Home</button>
        <div id="quiz-controls">
            <select id="quiz-category">
                <option value="9">General Knowledge</option>
                <option value="11">Film</option>
                <option value="12">Music</option>
                <option value="17">Science & Nature</option>
                <option value="21">Sports</option>
                <option value="23">History</option>
            </select>
            
            <select id="quiz-difficulty">
                <option value="any">Any Difficulty</option>
                <option value="easy">Easy</option>
                <option value="medium">Medium</option>
                <option value="hard">Hard</option>
            </select>

            <select id="quiz-count">
                <option value="5">5 Questions</option>
                <option value="10">10 Questions</option>
                <option value="15">15 Questions</option>
            </select>
            <button id="startQuizBtn">Start Quiz</button>
        </div>

        <div id="quiz-area">Click 'Start Quiz' to begin!</div>

        <div id="timer-display" style="display: none;">10</div>

        <div id="quiz-navigation" style="display: none;">
            <span></span> <span id="questionNum">Q1</span>
            <button id="nextBtn">Next</button>
            <span id="scoreLabel">Score: 0</span>
        </div>

        <div id="leaderboard"></div>
    </div>

    <div id="editor-container" class="modal-overlay" style="display: none;">
        <div class="modal-content" id="editor-modal-content">
            <button id="close-editor-btn" class="close-btn">X</button>
            <h2>Quiz Editor</h2>
            
            <div id="quiz-meta-form">
                <input type="text" id="quiz-title-input" placeholder="Enter Quiz Title">
                <input type="text" id="quiz-recommend-id-input" placeholder="Optional: Paste Study Guide ID to recommend">
                <button id="add-question-btn" class="card-btn">Add New Question</button>
            </div>
            
            <div id="question-list-container">
                </div>

            <div id="editor-controls">
                <button id="save-quiz-btn" class="sign-btn">Save Quiz</button>
                <button id="manage-quizzes-btn">Manage My Quizzes</button>
            </div>
        </div>
    </div>

    <div id="study-editor-container" class="modal-overlay" style="display: none;">
        <div class="modal-content" id="study-editor-modal-content">
            <button id="close-study-editor-btn" class="close-btn">X</button>
            <h2>Study Guide Editor</h2>
            <div id="study-meta-form">
                <input type="text" id="study-title-input" placeholder="Enter Study Guide Title">
                <button id="add-flashcard-btn" class="card-btn">Add New Flashcard</button>
            </div>
            
            <div id="flashcard-list-container">
                </div>

            <div id="study-editor-controls">
                <button id="save-study-guide-btn" class="sign-btn">Save Study Guide</button>
            </div>
        </div>
    </div>

    <div id="study-player-container" class="modal-overlay" style="display: none;">
        <div class="modal-content" id="study-player-modal-content">
            <button id="close-study-player-btn" class="close-btn">X</button>
            <h2 id="study-player-title">Study Session</h2>
            
            <div class="flashcard-player">
                <div class="flashcard" id="study-flashcard">
                    <div class="flashcard-face flashcard-front">
                        <span id="flashcard-front-text">Term</span>
                    </div>
                    <div class="flashcard-face flashcard-back">
                        <span id="flashcard-back-text">Definition</span>
                    </div>
                </div>
            </div>

            <div class="study-player-nav">
                <button id="study-prev-btn">Previous</button>
                <span id="study-card-count">1 / 10</span>
                <button id="study-next-btn">Next</button>
            </div>
        </div>
    </div>


    <div id="manage-container" class="modal-overlay" style="display: none;">
        <div class="modal-content" id="manage-modal-content">
            <button id="close-manage-btn" class="close-btn">X</button>
            <h2>Manage My Content</h2>
            
            <div id="my-quiz-list-container">
                </div>
        </div>
    </div>

    <div id="results-container" class="modal-overlay" style="display: none;">
        <div class="modal-content" id="results-modal-content">
            <button id="close-results-btn" class="close-btn">X</button>
            <h2 id="results-quiz-title">Quiz Results</h2>
            
            <div id="quiz-results-list-container">
                </div>
        </div>
    </div>

    <div id="my-results-container" class="modal-overlay" style="display: none;">
        <div class="modal-content" id="my-results-modal-content">
            <button id="close-my-results-btn" class="close-btn">X</button>
            <h2>My Past Results</h2>
            
            <div id="my-results-list-container">
                </div>
        </div>
    </div>

    <div id="giphy-container" class="modal-overlay" style="display: none;">
        <div class="modal-content" id="giphy-modal-content">
            <button id="close-giphy-btn" class="close-btn">X</button>
            <h2>Search for a GIF</h2>
            <div class="giphy-search-box">
                <input type="search" id="giphy-search-bar" placeholder="e.g., cats, space, funny">
                <button id="giphy-search-btn">Search</button>
            </div>
            <div id="giphy-results-grid">
                </div>
        </div>
    </div>

    <div id="toast-notification"></div>

    <footer>
        &copy; 2025 QuizHub
    </footer>

    <script src="script.js"></script>
</body>
</html>